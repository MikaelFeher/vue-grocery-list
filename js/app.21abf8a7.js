(function(e){function t(t){for(var r,s,o=t[0],c=t[1],l=t[2],d=0,m=[];d<o.length;d++)s=o[d],i[s]&&m.push(i[s][0]),i[s]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);u&&u(t);while(m.length)m.shift()();return a.push.apply(a,l||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],r=!0,o=1;o<n.length;o++){var c=n[o];0!==i[c]&&(r=!1)}r&&(a.splice(t--,1),e=s(s.s=n[0]))}return e}var r={},i={app:0},a=[];function s(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=r,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(n,r,function(t){return e[t]}.bind(null,r));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/vue-grocery-list/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var l=0;l<o.length;l++)t(o[l]);var u=c;a.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";var r=n("c21b"),i=n.n(r);i.a},4893:function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("097d");var r=n("2b0e"),i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container",attrs:{id:"app"}},[n("h3",[e._v("Inköpslista")]),n("router-view")],1)},a=[],s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container center-align",attrs:{id:"main-page"}},[e.isLoading?n("LoadingScreen"):e._e(),e.isLoading?e._e():n("div",[n("div",{staticClass:"row"},[e.isEditing?e._e():n("AddItemForm",{attrs:{addItem:e.addItem,errorMsg:e.errorMsg},on:{itemToAdd:function(t){e.itemToAdd=t}}}),e.isEditing?n("EditItemForm",{attrs:{updateItem:e.updateItem,itemToEdit:e.itemToEdit,errorMsg:e.errorMsg},on:{cancel:function(t){e.isEditing=t,e.errorMsg=""},updateItem:e.updateItem}}):e._e()],1),e.allCompleted?e._e():n("div",{staticClass:"row",attrs:{id:"groceries-list"}},[e._m(0),n("draggable",{staticClass:"row",attrs:{element:"ul",list:e.groceries,options:{handle:".handle"}},on:{change:e.updateOrder}},e._l(e.groceries,function(t){return t.completed?e._e():n("li",{key:t[".key"],staticClass:"left-align black-text col s12 col m6 offset-m3"},[n("span",{attrs:{id:"drag-handle-span"}},[n("i",{staticClass:"material-icons blue-grey-text handle"},[e._v("drag_handle")])]),n("p",{staticClass:"col s9 truncate",on:{click:function(n){e.setItemCompleted(t[".key"])}}},[n("b",[e._v(e._s(t.name))])]),n("span",{attrs:{id:"edit-icon-span"}},[n("i",{staticClass:"material-icons blue-grey-text",on:{click:function(n){e.editItem(t)}}},[e._v("edit")])]),n("span",{attrs:{id:"delete-icon-span"}},[n("i",{staticClass:"material-icons red-text",on:{click:function(n){e.removeItem(t[".key"])}}},[e._v("delete")])])])})),n("hr",{staticClass:"col s12 col m6 offset-m3"})],1),e.allCompleted?n("AllDone"):e._e(),e.anyCompleted?n("div",[n("div",{staticClass:"row"},[e._m(1),n("hr",{staticClass:"col s12 col m6 offset-m3"}),e._l(e.groceries,function(t){return n("ul",{key:t[".key"]},[t.completed?n("li",{staticClass:"center-align black-text col s12 col m6 offset-m3",on:{click:function(n){e.setItemNotCompleted(t[".key"])}}},[n("p",{staticClass:"col s12 truncate",attrs:{id:"completed-groceries-name"}},[n("b",[e._v(e._s(t.name))])])]):e._e()])}),n("hr",{staticClass:"col s12 col m6 offset-m3"})],2),n("button",{staticClass:"btn waves-effect waves-light amber darken-2",attrs:{id:"clear-completed-button"},on:{click:e.clearCompleted}},[e._v("Rensa plockade varor")])]):e._e()],1),e.isLoading?e._e():n("LogoutButton")],1)},o=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"row"},[n("h5",[e._v("Varor")]),n("hr",{staticClass:"col s12 col m6 offset-m3"})])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("h5",[n("em",[e._v("Plockade Varor")])])}],c=(n("f751"),n("7f7f"),n("96cf"),n("3040")),l=n("1516"),u=n.n(l),d=n("8aa5"),m=n.n(d),f=Object(d["initializeApp"])({apiKey:"AIzaSyCx2zjDMqDFsfnWjx5vyWje0yVF3D_tyUQ",authDomain:"vue-grocery-list-2a240.firebaseapp.com",databaseURL:"https://vue-grocery-list-2a240.firebaseio.com",projectId:"vue-grocery-list-2a240",storageBucket:"vue-grocery-list-2a240.appspot.com",messagingSenderId:"758798952132"}),p=f.database(),h=p.ref("groceries"),v=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},g=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"row",attrs:{id:"loading-screen"}},[n("div",{staticClass:"col s10 offset-s1 col m4 offset-m4"},[n("h5",[e._v("Hämtar listan...")]),n("div",{staticClass:"progress"},[n("div",{staticClass:"indeterminate"})])])])}],b=n("2877"),_={},w=Object(b["a"])(_,v,g,!1,null,null,null);w.options.__file="LoadingScreen.vue";var C=w.exports,y=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},k=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"row"},[n("div",{staticClass:"col s12 col m6 offset-m3 green"},[n("h4",{staticClass:"white-text"},[e._v("Du är klar :)))")])])])}],x={},I=Object(b["a"])(x,y,k,!1,null,null,null);I.options.__file="AllDone.vue";var E=I.exports,O=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("form",{staticClass:"col s12 col m6 offset-m3",on:{submit:function(t){return t.preventDefault(),e.addItem(t)}}},[n("div",{staticClass:"input-field"},[n("label",{attrs:{for:"add-item"}},[e._v("Lägg till vara")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.newItem,expression:"newItem"}],staticClass:"center-align",attrs:{type:"text",id:"add-item",autocomplete:"off"},domProps:{value:e.newItem},on:{input:function(t){t.target.composing||(e.newItem=t.target.value)}}})]),e.errorMsg.length?n("h6",{staticClass:"card-panel red white-text"},[n("b",[e._v(e._s(e.errorMsg))])]):e._e(),n("button",{staticClass:"btn waves-effect waves-light green",attrs:{type:"submit"},on:{click:e.sendAndClearInput}},[e._v("Lägg till vara")])])},j=[],M={name:"EditItemForm",props:["addItem","errorMsg"],data:function(){return{newItem:""}},methods:{sendAndClearInput:function(){this.$emit("itemToAdd",this.newItem),this.newItem=""}}},A=M,T=Object(b["a"])(A,O,j,!1,null,null,null);T.options.__file="AddItemForm.vue";var R=T.exports,L=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("form",{staticClass:"col s12 col m6 offset-m3",on:{submit:function(e){e.preventDefault()}}},[n("div",{staticClass:"input-field"},[n("label",{attrs:{for:"edit-item"}},[e._v("Redigera vara")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.itemToEdit.name,expression:"itemToEdit.name"}],staticClass:"center-align",attrs:{type:"text",id:"edit-item"},domProps:{value:e.itemToEdit.name},on:{input:function(t){t.target.composing||e.$set(e.itemToEdit,"name",t.target.value)}}})]),e.errorMsg.length?n("h6",{staticClass:"card-panel red white-text"},[n("b",[e._v(e._s(e.errorMsg))])]):e._e(),n("button",{staticClass:"btn waves-effect waves-light green col s5 offset-s1",attrs:{type:"submit"},on:{click:function(t){e.$emit("updateItem")}}},[e._v("Uppdatera")]),n("button",{staticClass:"btn waves-effect waves-light red col s4 offset-s1",attrs:{type:"button"},on:{click:function(t){e.$emit("cancel",!1)}}},[e._v("Avbryt")])])},$=[],P={name:"EditItemForm",props:["updateItem","itemToEdit","errorMsg"]},D=P,S=Object(b["a"])(D,L,$,!1,null,null,null);S.options.__file="EditItemForm.vue";var F=S.exports,N=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"row"},[n("div",{staticClass:"col s6 offset-s3"},[n("button",{staticClass:"waves-effect waves-light btn red",on:{click:e.logout}},[e._v("Logga Ut")])])])},B=[],U=(n("a481"),{name:"LogoutButton",methods:{logout:function(){var e=this;m.a.auth().signOut().then(function(){return e.$router.replace("/login")})}}}),q=U,z=Object(b["a"])(q,N,B,!1,null,null,null);z.options.__file="LogoutButton.vue";var V=z.exports,W={name:"MainPage",components:{draggable:u.a,LoadingScreen:C,AllDone:E,AddItemForm:R,EditItemForm:F,LogoutButton:V},data:function(){return{itemToAdd:"",anyCompleted:!1,allCompleted:!1,isLoading:!0,itemToEdit:{},isEditing:!1,errorMsg:""}},created:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.checkCompleted();case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),updated:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:t=document.getElementById("edit-item")||void 0,t&&t.focus(),this.checkCompleted();case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),firebase:{groceries:{source:h.orderByChild("order"),readyCallback:function(){this.isLoading=!1}}},methods:{populateOfflineDb:function(){this.offlineDb=this.offlineDb.concat(this.groceries)},addItem:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.inputNotOk(this.itemToAdd);case 2:if(!e.sent){e.next=4;break}return e.abrupt("return");case 4:h.push({order:this.groceries.length,name:this.itemToAdd.toLowerCase(),completed:!1}).then(function(){t.itemToAdd="",document.getElementById("add-item").focus(),t.checkCompleted()});case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),updateItem:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.inputNotOk(this.itemToEdit.name);case 2:if(!e.sent){e.next=4;break}return e.abrupt("return");case 4:h.child(this.itemToEdit[".key"]).update({name:this.itemToEdit.name}).then(function(){t.isEditing=!1,t.itemToEdit={}});case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),inputNotOk:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!this.nameTooShort(t)){e.next=3;break}return this.errorMsg="Måste innehålla minst 2 tecken...",e.abrupt("return",!0);case 3:return e.next=5,this.nameExists(t);case 5:if(!e.sent){e.next=8;break}return this.errorMsg="Finns redan en vara med det namnet...",e.abrupt("return",!0);case 8:return this.errorMsg="",e.abrupt("return",!1);case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),nameTooShort:function(e){return e.length<2},nameExists:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.groceries.filter(function(e){return e.name===t});case 2:return n=e.sent,e.abrupt("return",!!n.length);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),editItem:function(e){this.errorMsg="",this.isEditing=!0,this.itemToEdit=Object.assign({},e)},setItemCompleted:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(t){var n=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,h.child(t).update({completed:!0}).then(function(){return n.checkCompleted()});case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),setItemNotCompleted:function(e){var t=this;h.child(e).update({completed:!1}).then(function(){return t.checkCompleted()})},updateOrder:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(){var t,n=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.groceries.reduce(function(e,t){return e.concat(Object.assign({},t,{order:n.groceries.indexOf(t)}))},[]);case 2:return t=e.sent,e.next=5,t.map(function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,h.child(t[".key"]).update({order:t.order});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}());case 5:this.checkCompleted();case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),removeItem:function(e){var t=this;h.child(e).remove().then(function(){return t.checkCompleted()}),this.isEditing=!1,this.itemToEdit=""},checkCompleted:function(){if(!this.groceries&&!this.isLoading)return this.allCompleted=!0;this.anyCompleted=this.checkIfAnyCompleted(),this.allCompleted=this.checkIfAllCompleted()},checkIfAnyCompleted:function(){var e=this.groceries.filter(function(e){return e.completed});return!!e.length},checkIfAllCompleted:function(){var e=this.groceries.filter(function(e){return!e.completed}),t=!e.length;return t},clearCompleted:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(){var t,n=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:t={},this.groceries.filter(function(e){return e.completed}).map(function(e){return t[e[".key"]]=null}),h.update(t).then(function(){return n.checkCompleted()}),this.anyCompleted=!1;case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}},J=W,H=(n("59f2"),Object(b["a"])(J,s,o,!1,null,null,null));H.options.__file="MainPage.vue";var K=H.exports,Q={name:"app",components:{MainPage:K}},G=Q,X=(n("034f"),Object(b["a"])(G,i,a,!1,null,null,null));X.options.__file="App.vue";var Y=X.exports,Z=n("5f30"),ee=n.n(Z),te=n("8c4f"),ne=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container center-align",attrs:{id:"login"}},[n("div",{staticClass:"row"},[n("form",{staticClass:"col s10 offset-s1 col m6 offset-m3",on:{submit:function(t){return t.preventDefault(),e.login(t)}}},[n("div",{staticClass:"input-field"},[n("i",{staticClass:"material-icons prefix"},[e._v("email")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"}],attrs:{type:"email",id:"email"},domProps:{value:e.email},on:{input:function(t){t.target.composing||(e.email=t.target.value)}}}),n("label",{attrs:{for:"email"}},[e._v("Email")])]),n("div",{staticClass:"input-field"},[n("i",{staticClass:"material-icons prefix"},[e._v("lock")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],attrs:{type:"password",id:"password"},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}}),n("label",{attrs:{for:"password"}},[e._v("Password")])]),n("button",{staticClass:"btn waves-effect waves-light green",attrs:{type:"submit"}},[e._v("Log In")])])]),e.errorMsg.length?n("div",{staticClass:"row",attrs:{id:"error-alert"}},[n("h6",{staticClass:"card-panel red white-text col s10 offset-s1"},[n("b",[e._v(e._s(e.errorMsg))])])]):e._e()])},re=[],ie={name:"Login",data:function(){return{email:"",password:"",errorMsg:""}},methods:{login:function(){var e=this;m.a.auth().signInWithEmailAndPassword(this.email,this.password).then(function(){e.$router.replace("/index.html"),e.errorMsg=""}).catch(function(t){return e.errorMsg=t.message})}}},ae=ie,se=(n("e6c6"),Object(b["a"])(ae,ne,re,!1,null,"6f51b469",null));se.options.__file="Login.vue";var oe=se.exports;r["a"].use(te["a"]);var ce=new te["a"]({base:"/vue-grocery-list/",mode:"history",routes:[{path:"/index.html",name:"MainPage",component:K,meta:{requiresAuth:!0}},{path:"/login",name:"login",component:oe},{path:"*",redirect:"/login"}]});ce.beforeEach(function(e,t,n){var r=m.a.auth().currentUser,i=e.matched.some(function(e){return e.meta.requiresAuth});i&&!r?n("/login"):!i&&r?n("/index.html"):n()});var le=ce;r["a"].config.productionTip=!1,r["a"].use(ee.a),m.a.auth().onAuthStateChanged(function(e){new r["a"]({router:le,render:function(e){return e(Y)}}).$mount("#app")})},"59f2":function(e,t,n){"use strict";var r=n("4893"),i=n.n(r);i.a},"66a4":function(e,t,n){},c21b:function(e,t,n){},e6c6:function(e,t,n){"use strict";var r=n("66a4"),i=n.n(r);i.a}});
//# sourceMappingURL=app.21abf8a7.js.map